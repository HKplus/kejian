---
theme: league
---

# 双指针-数组合并

[toc]

--

「指针」是编程语言中的一个对象，它存储着一个内存空间的地址，计算机可以通过这个地址找到变量的值。也就是说，这个特定的地址指向这个特定的值。指针最大的优点在于它可以有效利用零碎的内存空间。本章主要涉及的问题有如下几项。

--

-   数组合并：合并两个有序数组。

-   二分查找：在有序数组中查找元素。

-   链表：链表的概念和应用。

---

## 数组合并

我们学习过列表的使用方法。通过列表，可以建立内部只存在整型变量的数组。可以用数组来模拟指针。

--

### 合并有序的数组

指针的意思是内存空间的地址。可以通过一个数组中每个元素的下标来找出它的值，所以存储这个元素位置的下标值的变量可以看作一个指针。我们将以这个概念来实现 Python 中的指针问题。由于它不是真正意义上的指针，所以我们叫它「模拟指针问题」。

--

我们先来看第一个问题：数组合并问题。

有两个从小到大有序排列的数组，如图所示。

![img](%E5%8F%8C%E6%8C%87%E9%92%88-%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6.assets/v2-d1a300b7ce8c20d45b166623a2c9f2dc.jpg)

第一个数组里有 5 个元素，第二个数组里有 4 个元素。要想把它们合并成一个新的从小到大排列的数组，该怎么编程实现呢？

---

#### 思路

--

在开始编写程序之前，我们先来了解一下这道题的思路。

首先拿出第二个数组的第一个元素 2，把它和第一个数组中的第一个元素进行比较，如图  所示。

![img](%E5%8F%8C%E6%8C%87%E9%92%88-%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6.assets/v2-9a673b60de53a157ebe73d6f9699fdef.jpg)

--

2 比 1 要大，所以移动到第一个数组的第二个元素 3，再次进行比较，如图所示。

![img](%E5%8F%8C%E6%8C%87%E9%92%88-%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6.assets/v2-8733dc8e71f22c38876cf770b1df9a14.jpg)

--

2 比 3 要小，而我们已经知道 2 比前面的 1 要大，所以可以把 2 插到 3 的位置。3 和它后面的元素都向后移动一个位置，如图 

![img](%E5%8F%8C%E6%8C%87%E9%92%88-%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6.assets/v2-e17f869d47be65618cff2d0c9d18e4aa.jpg)

--

这时第二个数组中还剩下三个元素 5、8、11。把 5 拿出来从 3 开始比较。注意，因为两个数组都是从小到大有序排列的，2 在原来的第二个数组中排在 5 前面，所以它和它前面的数字都比 5 小，直接从 3 开始比较即可，如图所示。

![img](%E5%8F%8C%E6%8C%87%E9%92%88-%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6.assets/v2-e1113554c101a3279f6bc8c9a04d26fa.jpg)

--

5 在 6 这里停下，因为 6 大于 5。把 5 插到 6 的前面，如图 所示。

![img](%E5%8F%8C%E6%8C%87%E9%92%88-%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6.assets/v2-5451c552962ab46c5b55e59ff784f594.jpg)

--

完成插入后，第一个数组如图

![img](%E5%8F%8C%E6%8C%87%E9%92%88-%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6.assets/v2-4c10e5a95d8e6608eba1fe6827a46e1a.jpg)

--

随后，再重复之前的操作，直到第二个数组中的所有元素都被插入第一个数组中。此时排序完成，

![img](%E5%8F%8C%E6%8C%87%E9%92%88-%E6%95%B0%E7%BB%84%E5%90%88%E5%B9%B6.assets/v2-ee79d8a60ff532f41ed3f501b5162b57.jpg)

---

#### 程序

--

首先需要一个` for`  循环对第二个数组` arr2 ` 实现从小到大的遍历：

```python
for i in range(0,len(arr2)):
```

--

随后在 `for ` 循环内部加上` while`  对 `arr1 ` 进行操作：

```python
ind = 0
for i in range(0,len(arr2)):
    while ind < len(arr1):   # ind的范围不能超过数组元素下标的最大值
        if arr2[i] <= arr1[ind]:
            ans.insert(ind+i,arr2[i]) # 向第一个数组中插入第二个数组中的数
            break
        else:
            ind += 1    # 如果ind指向的数字比i的小,就讲ind向后一位
```

--

>   **注意**: Python中的数组也叫列表

--

>   *补充*:
>
>   -   `ind `是存储数组中数值的下标的变量
>   -   `ans` 用于存储排序完毕后的数组中的变量（初始值为 `arr1`）。

--

>   为什么不使用` for `循环而要用 `while `呢？因为同一个数前面可能要插入两个数字，而` for` 循环只能让它的前面插入一个数。

---

## 最终代码

```python
arr1 = [1,3,4,6,10]				# 初始化两个数组的值
arr2 = [2,5,8,11]
ind = 0
ans = arr1.copy() 				# 将ans初始化微arr1
for i in range(0,len(arr2)):
    while ind < len(arr1):   # ind的范围不能超过数组元素下标的最大值
        if arr2[i] <= arr1[ind]:
            ans.insert(ind+i,arr2[i]) # 向第一个数组中插入第二个数组中的数
            break
        else:
            ind += 1    # 如果ind指向的数字比i的小,就讲ind向后一位
	else:						# 如果arr1已经遍历玩乐,直接把剩下的arr2放到arr1结尾即可
        ans = ans + arr2[i:]
        break
```

--

>   -   `while...else `语句是用来判断 `while` 循环是否被完整执行完的语句。
>   -   如果 `while `循环的结束是因为 `while` 后面的判断语句（`ind < len（arr1）`）的返回值为 `False` ，则执行 `else`； 
>   -   如果是因为` break `而跳出循环，则不执行` else。` 

--


### 为什么

-   为什么要用` ans `存储 `arr1 `的值，而不在 `arr1 `内部直接改动呢？

--

-   如果直接使用` arr1`  存储答案，在向数组中添加元素的过程中，列表内部的元素会变化，也就是说，我们丢失了` arr1`  的原来的值。用 `ind`  调用原来列表中的元素与 `arr2 `中 的元素进行比较，而向 `ans ` 中插入 `arr2 ` 的数，就可以有效避免这个问题。

---

# 剧透

--

下节课:二分查找法